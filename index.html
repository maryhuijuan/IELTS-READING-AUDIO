<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IELTS Reading Audio Practice - Original Content</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .legal-notice {
            background: #fff3cd;
            border-left: 5px solid #ffc107;
            padding: 20px;
            margin: 20px 40px;
            border-radius: 10px;
        }

        .legal-notice h3 {
            color: #856404;
            margin-bottom: 10px;
        }

        .content {
            padding: 40px;
        }

        .passage-selector {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .passage-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid transparent;
        }

        .passage-card:hover {
            transform: translateY(-5px);
            border-color: #667eea;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .passage-card h3 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .passage-card .meta {
            color: #666;
            font-size: 0.9em;
            margin-top: 10px;
        }

        .reading-area {
            display: none;
            animation: fadeIn 0.5s;
        }

        .reading-area.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .passage-content {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            line-height: 1.8;
            font-size: 1.1em;
            margin-bottom: 20px;
        }

        .passage-content h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .passage-content p {
            margin-bottom: 15px;
        }

        .audio-controls {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .audio-controls h3 {
            margin-bottom: 20px;
        }

        .control-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: white;
            color: #667eea;
        }

        .btn-primary:hover {
            transform: scale(1.05);
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-info {
            background: #17a2b8;
            color: white;
        }

        .speed-control {
            margin-top: 20px;
        }

        .speed-control label {
            display: block;
            margin-bottom: 10px;
        }

        .speed-control input {
            width: 100%;
        }

        .voice-select {
            margin-top: 15px;
        }

        .voice-select select {
            width: 100%;
            padding: 10px;
            border-radius: 8px;
            border: none;
            font-size: 16px;
        }

        .practice-tools {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .tool-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            border: 2px solid #ddd;
        }

        .tool-card h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .timer {
            font-size: 3em;
            text-align: center;
            color: #667eea;
            font-weight: bold;
            margin: 20px 0;
        }

        .notes-area {
            width: 100%;
            min-height: 150px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            resize: vertical;
        }

        .back-btn {
            background: #6c757d;
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin-bottom: 20px;
        }

        .back-btn:hover {
            background: #5a6268;
        }

        .premium-notice {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            text-align: center;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }

            .passage-selector {
                grid-template-columns: 1fr;
            }

            .control-buttons {
                flex-direction: column;
            }
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéß IELTS Reading Audio Practice</h1>
            <p>Original Content - 100% Legal & Copyright-Free</p>
        </div>

        <div class="legal-notice">
            <h3>üìã Legal Notice</h3>
            <p><strong>All content is original and copyright-free.</strong> This system uses:</p>
            <ul style="margin-left: 20px; margin-top: 10px;">
                <li>‚úÖ AI-generated reading passages in IELTS style</li>
                <li>‚úÖ Web Speech API (built into your browser)</li>
                <li>‚úÖ No copyrighted materials from Cambridge IELTS</li>
                <li>‚úÖ 100% legal for personal and commercial use</li>
            </ul>
        </div>

        <div class="content">
            <!-- Passage Selection -->
            <div id="passage-selection">
                <h2 style="margin-bottom: 20px;">Choose a Reading Passage</h2>
                <div class="passage-selector">
                    <div class="passage-card" onclick="loadPassage(1)">
                        <h3>üì± The Digital Revolution</h3>
                        <p>Impact of smartphones on modern society</p>
                        <div class="meta">‚è±Ô∏è ~600 words | üéØ Academic</div>
                    </div>

                    <div class="passage-card" onclick="loadPassage(2)">
                        <h3>üåç Climate Change Solutions</h3>
                        <p>Innovative approaches to environmental challenges</p>
                        <div class="meta">‚è±Ô∏è ~650 words | üéØ Academic</div>
                    </div>

                    <div class="passage-card" onclick="loadPassage(3)">
                        <h3>üß† The Science of Memory</h3>
                        <p>How our brains store and retrieve information</p>
                        <div class="meta">‚è±Ô∏è ~700 words | üéØ Academic</div>
                    </div>

                    <div class="passage-card" onclick="loadPassage(4)">
                        <h3>üèôÔ∏è Urban Planning</h3>
                        <p>Designing sustainable cities for the future</p>
                        <div class="meta">‚è±Ô∏è ~680 words | üéØ Academic</div>
                    </div>

                    <div class="passage-card" onclick="loadPassage(5)">
                        <h3>üéì Education Technology</h3>
                        <p>The transformation of learning in the digital age</p>
                        <div class="meta">‚è±Ô∏è ~620 words | üéØ Academic</div>
                    </div>

                    <div class="passage-card" onclick="loadPassage(6)">
                        <h3>üî¨ Artificial Intelligence</h3>
                        <p>Opportunities and challenges of AI development</p>
                        <div class="meta">‚è±Ô∏è ~690 words | üéØ Academic</div>
                    </div>
                </div>
            </div>

            <!-- Reading Area -->
            <div id="reading-area" class="reading-area">
                <button class="back-btn" onclick="backToSelection()">‚¨ÖÔ∏è Back to Passages</button>

                <div class="passage-content" id="passage-text"></div>

                <div class="audio-controls">
                    <h3>üéß Audio Controls</h3>
                    
                    <div class="control-buttons">
                        <button class="btn btn-primary" onclick="playAudio()">‚ñ∂Ô∏è Play</button>
                        <button class="btn btn-danger" onclick="pauseAudio()">‚è∏Ô∏è Pause</button>
                        <button class="btn btn-info" onclick="stopAudio()">‚èπÔ∏è Stop</button>
                        <button class="btn btn-success" onclick="downloadAudio()">üíæ Download Audio</button>
                    </div>

                    <div class="speed-control">
                        <label>üéöÔ∏è Reading Speed: <span id="speed-value">1.0x</span></label>
                        <input type="range" min="0.5" max="2" step="0.1" value="1" 
                               oninput="updateSpeed(this.value)">
                    </div>

                    <div class="voice-select">
                        <label>üó£Ô∏è Voice Selection:</label>
                        <select id="voice-selector" onchange="updateVoice()"></select>
                    </div>

                    <p style="margin-top: 15px; opacity: 0.9;">
                        ‚ÑπÔ∏è Using your browser's built-in text-to-speech (free & unlimited)
                    </p>
                </div>

                <div class="practice-tools">
                    <div class="tool-card">
                        <h3>‚è±Ô∏è Reading Timer</h3>
                        <div class="timer" id="timer">00:00</div>
                        <button class="btn btn-primary" onclick="startTimer()">Start</button>
                        <button class="btn btn-danger" onclick="stopTimer()">Stop</button>
                        <button class="btn btn-info" onclick="resetTimer()">Reset</button>
                    </div>

                    <div class="tool-card">
                        <h3>üìù Take Notes</h3>
                        <textarea class="notes-area" id="notes" 
                                  placeholder="Write your notes, vocabulary, or answers here..."></textarea>
                        <button class="btn btn-success" onclick="saveNotes()" style="margin-top: 10px;">
                            üíæ Save Notes
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="premium-notice">
            <h3>üåü Want More Passages?</h3>
            <p>Upgrade to Premium for:</p>
            <p>‚úÖ 100+ Original Reading Passages | ‚úÖ Downloadable Audio Files | ‚úÖ Practice Questions</p>
            <button class="btn btn-primary" style="margin-top: 15px;" onclick="alert('Contact for premium access!')">
                Learn More
            </button>
        </div>
    </div>

    <script>
        // Reading Passages Database (Original Content)
        const passages = {
            1: {
                title: "The Digital Revolution",
                content: `The Digital Revolution

The transformation brought about by digital technology has fundamentally altered nearly every aspect of modern life. From the way we communicate and work to how we access information and entertainment, digital innovation has created unprecedented changes in human society over the past few decades.

The smartphone, perhaps the most visible symbol of this revolution, exemplifies how technology has become deeply integrated into our daily routines. These pocket-sized devices combine the functionality of numerous separate tools‚Äîcamera, calculator, map, music player, and communication device‚Äîinto a single, portable unit. This convergence has not only increased convenience but has also changed our expectations about accessibility and connectivity.

In the workplace, digital technology has enabled new forms of collaboration and productivity. Cloud computing allows teams spread across different continents to work on the same projects simultaneously. Video conferencing has reduced the need for business travel while maintaining face-to-face interaction. Artificial intelligence and automation have taken over many routine tasks, allowing human workers to focus on more creative and strategic activities.

The educational sector has undergone similarly dramatic changes. Online learning platforms provide access to courses from prestigious institutions to anyone with an internet connection. Interactive educational software adapts to individual learning styles and paces. Digital libraries give students instant access to millions of books and research papers that would have required days or weeks to obtain in the pre-digital era.

However, these advances have not come without challenges. The digital divide‚Äîthe gap between those with access to digital technology and those without‚Äîhas created new forms of inequality. Privacy concerns have intensified as more of our personal information exists in digital form. The addictive nature of digital devices and social media has raised questions about mental health and social connection.

Despite these concerns, the digital revolution shows no signs of slowing. Emerging technologies like virtual reality, quantum computing, and advanced artificial intelligence promise to bring even more profound changes to how we live and work. Understanding and adapting to these changes while addressing their challenges will be crucial for individuals and societies in the coming decades.`
            },
            2: {
                title: "Climate Change Solutions",
                content: `Climate Change Solutions: Innovative Approaches

As the reality of climate change becomes increasingly apparent, scientists, engineers, and policymakers around the world are developing innovative solutions to reduce greenhouse gas emissions and adapt to changing environmental conditions. These approaches range from large-scale technological interventions to grassroots community initiatives.

Renewable energy technology has made remarkable progress in recent years. Solar panels have become significantly more efficient and affordable, with costs dropping by over 80% in the last decade. Wind energy has expanded from small-scale projects to massive offshore wind farms capable of powering entire cities. These clean energy sources are increasingly competitive with fossil fuels, making the transition to renewable energy both environmentally and economically viable.

Carbon capture and storage technology represents another promising avenue. These systems can remove carbon dioxide directly from the atmosphere or capture it at the source of emissions, such as power plants or industrial facilities. Once captured, the carbon can be stored underground in geological formations or used to create useful products like building materials or synthetic fuels.

Nature-based solutions have also gained attention as effective climate change mitigation strategies. Reforestation projects not only absorb carbon dioxide but also provide habitat for wildlife and prevent soil erosion. Urban green spaces help reduce the heat island effect in cities while improving air quality and providing recreational areas for residents. Wetland restoration protects coastlines from storm surge while creating important ecosystems for marine life.

Agricultural innovation offers significant potential for reducing emissions while feeding a growing global population. Precision farming techniques use sensors and data analysis to optimize the use of water, fertilizers, and pesticides, reducing waste and environmental impact. Regenerative agriculture practices build soil health and sequester carbon while producing nutritious food.

International cooperation remains essential for addressing climate change effectively. The Paris Agreement brought together nations to commit to limiting global temperature rise, though implementation and enforcement of these commitments continue to face challenges. Technology transfer programs help developing nations adopt clean energy solutions without sacrificing economic development.

Individual actions, while sometimes dismissed as insufficient, collectively make a substantial difference. Energy-efficient appliances, sustainable transportation choices, reduced meat consumption, and conscious consumer decisions all contribute to lowering carbon footprints. When multiplied across millions of people, these personal choices create significant impact.`
            },
            3: {
                title: "The Science of Memory",
                content: `The Science of Memory: Understanding How We Remember

Memory is one of the most fascinating and essential functions of the human brain. It allows us to store experiences, learn new skills, and maintain our sense of identity over time. Recent advances in neuroscience have revealed much about how memory works, yet many mysteries remain.

The process of memory formation begins with encoding, where the brain converts sensory information into a form it can store. This involves complex neural activity across multiple brain regions. The hippocampus, a seahorse-shaped structure deep within the brain, plays a crucial role in forming new memories, particularly those related to facts and events. Damage to this area, as seen in patients with Alzheimer's disease, severely impairs the ability to form new memories while often leaving older memories intact.

Memory is not stored in a single location but distributed across various parts of the brain. Different types of memories involve different neural networks. Procedural memories, which involve learned skills like riding a bicycle or playing a musical instrument, engage the cerebellum and basal ganglia. Emotional memories activate the amygdala, which is why emotionally charged events are often remembered more vividly than neutral ones.

The consolidation process, where memories transition from short-term to long-term storage, occurs primarily during sleep. Research has shown that the brain replays experiences during certain sleep stages, strengthening the neural connections that represent those memories. This explains why adequate sleep is so important for learning and why all-night study sessions are often counterproductive.

Memory is far from perfect, however. Research has demonstrated that memories can be remarkably malleable. Each time we recall a memory, we slightly alter it based on our current state, knowledge, and biases. This reconstructive nature of memory has important implications for eyewitness testimony in legal proceedings and raises philosophical questions about the reliability of our personal narratives.

Techniques for improving memory have been studied extensively. Spaced repetition, where information is reviewed at increasing intervals, has proven more effective than cramming. The method of loci, an ancient technique involving mentally placing items to remember in familiar locations, remains one of the most powerful memorization strategies. Regular physical exercise, adequate sleep, and maintaining social connections all contribute to better memory function.

As our understanding of memory deepens, new therapeutic approaches emerge for memory disorders. While a cure for conditions like Alzheimer's remains elusive, treatments to slow progression and manage symptoms continue to improve. The future may hold possibilities once confined to science fiction, such as memory enhancement technologies or targeted memory modification, raising both exciting possibilities and ethical concerns.`
            },
            4: {
                title: "Urban Planning for Sustainable Cities",
                content: `Urban Planning for Sustainable Cities

As more than half of the world's population now lives in urban areas‚Äîa proportion expected to reach 68% by 2050‚Äîthe design and management of cities has become crucial for addressing global challenges including climate change, resource scarcity, and social inequality. Urban planners are developing innovative approaches to create cities that are not only environmentally sustainable but also livable, equitable, and economically vibrant.

The concept of the "15-minute city" has gained significant attention among urban planners. This model envisions neighborhoods where residents can access most of their daily needs‚Äîwork, shopping, education, healthcare, and recreation‚Äîwithin a 15-minute walk or bike ride. This reduces dependence on cars, decreases emissions, and creates more vibrant street life. Paris, Barcelona, and Melbourne are among the cities implementing elements of this vision.

Green infrastructure represents another key component of sustainable urban design. Rather than viewing stormwater as a problem requiring concrete drainage systems, cities are incorporating parks, green roofs, and permeable surfaces that absorb rainfall naturally. These features reduce flooding risk, filter pollutants, cool urban heat islands, and provide recreational spaces. Singapore's extensive network of parks and green buildings demonstrates how dense urban environments can maintain substantial green coverage.

Transportation systems are being reimagined to prioritize public transit, cycling, and walking over private vehicles. Cities like Copenhagen have created extensive networks of protected bike lanes, making cycling the preferred mode of transport for many residents. Investment in efficient, affordable public transportation reduces congestion and emissions while ensuring mobility for those who cannot afford private vehicles.

Mixed-use development, which combines residential, commercial, and sometimes industrial uses in the same area, creates more dynamic and sustainable neighborhoods. Rather than isolating different activities in separate zones connected by long commutes, mixed-use areas allow people to live near where they work and shop. This pattern, common in historic city centers, is being revived in new developments and urban renewal projects.

Affordable housing remains a critical challenge in many cities. As urban areas become more desirable and expensive, lower-income residents are often displaced to distant suburbs, increasing inequality and commute times. Sustainable urban planning must include strategies for maintaining economic diversity, such as inclusionary zoning requirements, community land trusts, and investments in social housing.

Technology is playing an increasingly important role in urban management. Smart city initiatives use sensors and data analytics to optimize traffic flow, reduce energy consumption, and improve public services. However, concerns about privacy and digital divides require careful consideration as these technologies are implemented.`
            },
            5: {
                title: "Education Technology: Transforming Learning",
                content: `Education Technology: Transforming Learning in the Digital Age

The integration of technology into education has accelerated dramatically in recent years, fundamentally changing how teaching and learning occur. While educational technology‚Äîor "EdTech"‚Äîoffers tremendous potential to improve educational outcomes and increase access to quality education, it also presents challenges that educators and policymakers must carefully navigate.

Personalized learning platforms represent one of the most promising applications of educational technology. These systems use algorithms to adapt to each student's learning pace, style, and current understanding. When a student struggles with a concept, the software provides additional practice and alternative explanations. When they demonstrate mastery, it moves them forward. This individualization, difficult for a single teacher to provide to 30 students simultaneously, can help each learner progress at an optimal rate.

Online learning has expanded educational access in unprecedented ways. Massive Open Online Courses (MOOCs) from platforms like Coursera and edX allow anyone with internet access to take courses from top universities. While completion rates for these courses remain relatively low, they have provided learning opportunities to millions who would never have had access to such education otherwise. The COVID-19 pandemic dramatically accelerated the adoption of online learning at all levels of education.

Virtual and augmented reality technologies are creating immersive learning experiences that were previously impossible. Medical students can practice surgical procedures in virtual operating rooms. History students can explore ancient civilizations through virtual reality reconstructions. Chemistry students can manipulate molecular structures in three dimensions. These experiences make abstract concepts concrete and provide hands-on practice in safe, controlled environments.

Collaborative tools have transformed how students work together on projects. Cloud-based platforms allow students to contribute to shared documents simultaneously, regardless of their physical location. Video conferencing enables real-time collaboration across distances. These tools prepare students for modern workplaces where remote collaboration is increasingly common.

However, the rapid adoption of educational technology has revealed significant challenges. The digital divide‚Äîdisparities in access to devices and reliable internet connections‚Äîhas created new forms of educational inequality. Students from lower-income families may lack the technology needed to complete assignments or participate in online learning. This gap became particularly visible during pandemic-related school closures.

Concerns about screen time and its effects on children's development have intensified as educational technology use has increased. While technology can enhance learning, excessive screen exposure has been linked to attention difficulties, sleep problems, and reduced physical activity. Finding the right balance between digital and traditional learning methods remains an ongoing challenge.

Data privacy and security issues raise important questions about how educational technology companies collect and use student information. The data generated by educational platforms can provide valuable insights into learning patterns, but it also creates risks if not properly protected.

Despite these challenges, educational technology continues to evolve and mature. The key to its successful implementation lies in viewing technology as a tool to enhance teaching rather than replace it. The most effective educational approaches combine the best of human instruction‚Äîempathy, creativity, and social connection‚Äîwith technology's ability to personalize, scale, and provide immediate feedback.`
            },
            6: {
                title: "Artificial Intelligence: Opportunities and Challenges",
                content: `Artificial Intelligence: Opportunities and Challenges

Artificial intelligence has emerged as one of the most transformative technologies of the 21st century, with applications spanning healthcare, transportation, finance, entertainment, and virtually every other sector of society. As AI systems become increasingly sophisticated and ubiquitous, they promise tremendous benefits while raising important questions about ethics, employment, and the future of human agency.

In healthcare, AI is revolutionizing diagnosis and treatment. Machine learning algorithms can analyze medical images with accuracy matching or exceeding that of human radiologists, potentially detecting diseases earlier and more reliably. AI systems can process vast amounts of medical literature and patient data to suggest treatment plans personalized to individual patients' genetic profiles and medical histories. During the COVID-19 pandemic, AI accelerated vaccine development and helped predict disease spread.

The transportation sector is being transformed by autonomous vehicle technology. Self-driving cars use AI to process sensor data, navigate roads, and make split-second decisions. While fully autonomous vehicles are not yet widespread, partially automated features like adaptive cruise control and automatic emergency braking are already saving lives. The potential benefits include reduced traffic accidents, decreased congestion, and increased mobility for those unable to drive.

Natural language processing has enabled AI assistants that can understand and respond to human speech with increasing sophistication. These systems power virtual assistants, automated customer service, and real-time translation services. They're making technology more accessible to people with disabilities and breaking down language barriers in international communication.

However, the advancement of AI also presents significant challenges. Job displacement is perhaps the most immediate concern. As AI systems become capable of performing tasks previously requiring human intelligence, many jobs may become automated. While new jobs will undoubtedly emerge, the transition may be difficult for workers whose skills become obsolete.

Algorithmic bias represents another critical issue. AI systems learn from historical data, which often reflects existing societal biases. Without careful design and oversight, these systems can perpetuate or even amplify discrimination in areas like hiring, lending, and criminal justice. Ensuring AI fairness requires diverse development teams and rigorous testing for bias.

Privacy concerns intensify as AI systems require vast amounts of data to function effectively. The same data that enables personalized services also enables unprecedented surveillance and manipulation. Regulations like the European Union's General Data Protection Regulation attempt to balance innovation with privacy protection, but keeping pace with technological change remains challenging.

The long-term question of artificial general intelligence‚ÄîAI systems with human-level intelligence across all domains‚Äîraises profound philosophical and existential questions. While such systems remain theoretical, they prompt important discussions about human values, consciousness, and our relationship with technology.`
            }
        };

        // Speech Synthesis
        let currentUtterance = null;
        let currentSpeed = 1.0;
        let currentPassageId = null;
        let timerInterval = null;
        let timerSeconds = 0;

        // Initialize voices
        function loadVoices() {
            const voices = speechSynthesis.getVoices();
            const select = document.getElementById('voice-selector');
            select.innerHTML = '';
            
            // Filter for English voices
            const englishVoices = voices.filter(voice => voice.lang.startsWith('en'));
            
            englishVoices.forEach((voice, index) => {
                const option = document.createElement('option');
                option.value = index;
                option.textContent = `${voice.name} (${voice.lang})`;
                select.appendChild(option);
            });
        }

        // Load voices when available
        if (speechSynthesis.onvoiceschanged !== undefined) {
            speechSynthesis.onvoiceschanged = loadVoices;
        }
        window.onload = loadVoices;

        function loadPassage(id) {
            currentPassageId = id;
            const passage = passages[id];
            
            document.getElementById('passage-text').innerHTML = `
                <h2>${passage.title}</h2>
                ${passage.content.split('\n\n').map(p => `<p>${p}</p>`).join('')}
            `;
            
            document.getElementById('passage-selection').classList.add('hidden');
            document.getElementById('reading-area').classList.add('active');
            
            // Load saved notes
            const savedNotes = localStorage.getItem(`notes-${id}`);
            if (savedNotes) {
                document.getElementById('notes').value = savedNotes;
            }
        }

        function backToSelection() {
            stopAudio();
            document.getElementById('passage-selection').classList.remove('hidden');
            document.getElementById('reading-area').classList.remove('active');
        }

        function playAudio() {
            if (currentUtterance && speechSynthesis.paused) {
                speechSynthesis.resume();
                return;
            }
            
            const text = passages[currentPassageId].content;
            currentUtterance = new SpeechSynthesisUtterance(text);
            
            const voices = speechSynthesis.getVoices().filter(v => v.lang.startsWith('en'));
            const selectedIndex = document.getElementById('voice-selector').value;
            currentUtterance.voice = voices[selectedIndex];
            
            currentUtterance.rate = currentSpeed;
            
            speechSynthesis.speak(currentUtterance);
        }

        function pauseAudio() {
            if (speechSynthesis.speaking && !speechSynthesis.paused) {
                speechSynthesis.pause();
            }
        }

        function stopAudio() {
            speechSynthesis.cancel();
            currentUtterance = null;
        }

        function updateSpeed(value) {
            currentSpeed = parseFloat(value);
            document.getElementById('speed-value').textContent = value + 'x';
            
            if (currentUtterance && speechSynthesis.speaking) {
                // Restart with new speed
                const wasPaused = speechSynthesis.paused;
                stopAudio();
                if (!wasPaused) {
                    playAudio();
                }
            }
        }

        function updateVoice() {
            // Voice will be applied when playAudio is called
        }

        function downloadAudio() {
            alert('üí° Tip: To save audio for offline use:\n\n1. On Windows: Use built-in Voice Recorder while playing\n2. On Mac: Use QuickTime Screen Recording\n3. Or use free software like Audacity\n\nNote: Browser-based TTS cannot directly export audio files, but you can record the output!');
        }

        // Timer Functions
        function startTimer() {
            if (timerInterval) return;
            
            timerInterval = setInterval(() => {
                timerSeconds++;
                const minutes = Math.floor(timerSeconds / 60);
                const seconds = timerSeconds % 60;
                document.getElementById('timer').textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }

        function stopTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
        }

        function resetTimer() {
            stopTimer();
            timerSeconds = 0;
            document.getElementById('timer').textContent = '00:00';
        }

        // Notes Functions
        function saveNotes() {
            const notes = document.getElementById('notes').value;
            localStorage.setItem(`notes-${currentPassageId}`, notes);
            alert('‚úÖ Notes saved!');
        }
    </script>
</body>
</html>